(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,n,t){e.exports=t(20)},,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(4),c=t.n(o),i=(t(12),t(13),t(14),t(1)),l=t(2),s=(t(15),t(16),r.a.memo(function(e){var n=e.evento,t=e.handleButtonClick;return r.a.createElement("article",{className:"Evento"},r.a.createElement("div",{className:"imagen"},r.a.createElement("img",{src:n.imagen,alt:n.nombre})),r.a.createElement("div",{className:"detalles"},r.a.createElement("h2",null,n.nombre),r.a.createElement("p",{className:"fecha-lugar"},n.fecha),r.a.createElement("p",null,"Entrada: ",r.a.createElement("span",{className:n.entrada},n.entrada)),r.a.createElement("div",{className:"botones"},function(){if(n.estado)return r.a.createElement("button",{className:"btn reservado",onClick:function(){return t(n)}},n.estado);if(n.agendado)return console.log("agendado"),r.a.createElement("button",{className:"btn reservado",onClick:function(){return t(n)}},"Agendado");switch(n.entrada){case"Gratis":return r.a.createElement("button",{className:"btn",onClick:function(){return t(n)}},"Reservar");case"Pr\xf3ximamente":return r.a.createElement("button",{className:"btn",onClick:function(){return t(n)}},"Agendar")}}(),r.a.createElement("a",{href:n.href,rel:"noopener noreferrer",target:"_blank",className:"btn ver-mas"},"Ver m\xe1s"))))},function(e,n){return e.evento.reservado===n.evento.reservado&&e.evento.estado===n.evento.estado})),u=(t(17),t(18),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),m=function(e){var n=e.open,t=e.closeModal,a=e.evento,o=e.confirm,c=e.sendingRequest,l="";switch(a.entrada){case"Gratis":l="reservar";break;case"Pr\xf3ximamente":l="agendar"}var s=function(){var e=Object(i.a)({},a,{accion:l});o(e)};return r.a.createElement("div",{className:"backdrop ".concat(n?"open":""),onClick:t},r.a.createElement("article",{className:"Modal",onClick:function(e){return e.stopPropagation()}},r.a.createElement("h2",null,a.nombre),r.a.createElement("img",{src:a.imagen,alt:a.titulo}),r.a.createElement("p",null,a.fecha),c?r.a.createElement(u,null):a.estado?r.a.createElement("button",{className:"btn reservado",onClick:s},a.estado):r.a.createElement("button",{className:"btn",onClick:s},l)))},d=function(){var e="https://cck-server.herokuapp.com/",n=Object(a.useState)([]),t=Object(l.a)(n,2),o=t[0],c=t[1],d=Object(a.useState)(!1),f=Object(l.a)(d,2),v=f[0],h=f[1],b=Object(a.useState)({}),p=Object(l.a)(b,2),g=p[0],E=p[1],w=Object(a.useState)(!0),k=Object(l.a)(w,2),N=k[0],C=k[1],j=Object(a.useState)(!1),O=Object(l.a)(j,2),y=O[0],S=O[1];Object(a.useEffect)(function(){fetch(e).then(function(e){return e.json()}).then(function(e){c(e),C(!1)})},[e]);var A=function(e){h(!0),E(e)};return r.a.createElement("article",{className:"Eventos"},N?r.a.createElement("div",{className:"div-loader"},r.a.createElement(u,null)):o.map(function(e,n){return r.a.createElement(s,{evento:Object(i.a)({},e,{id:n}),key:n,handleButtonClick:A})}),r.a.createElement(m,{open:v,closeModal:function(){h(!1)},evento:g,confirm:function(n){var t=n.nombre,a=n.fecha,r=n.id,l=n.accion,s={nombre:t,fecha:a,id:r};S(!0),fetch(e+"demo/"+l,{method:"POST",body:JSON.stringify({evento:s}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){S(!1);var n=o.map(function(n){return n.nombre===e.evento.nombre&&n.fecha===e.evento.fecha?Object(i.a)({},n,{estado:e.evento.estado}):n});c(n),E(Object(i.a)({},g,{estado:e.evento.estado}))}).catch(function(e){console.error("Error:",e),S(!1)})},sendingRequest:y}))},f=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"Home"},r.a.createElement("h1",null,"Nuevos Eventos"),r.a.createElement(d,null)))},v=(t(19),function(){return r.a.createElement("header",{className:"Header"},r.a.createElement("h1",null,"CCK"))});var h=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,null),r.a.createElement(f,null))},b=t(5),p=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}"Notification"in window&&Notification.requestPermission(function(e){"granted"===e&&"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){return function(){if(!("serviceWorker"in navigator))return;var e;navigator.serviceWorker.ready.then(function(n){return e=n,n.pushManager.getSubscription()}).then(function(n){if(null===n){var t=function(e){var n="=".repeat((4-e.length%4)%4),t=(e+n).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(t);return Uint8Array.from(Object(b.a)(a).map(function(e){return e.charCodeAt(0)}))}("BFE7GUyRtAmST40rSrpKGaHO3qYSauvwHp5JJH0P2dsmAuCDJJjiKw1PGnkiom9QtQwhUCVCMVYIq_fVjIhCFVM");return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})}}).then(function(e){return fetch("https://cck-server.herokuapp.com/subscribir",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)})}).then(function(n){n.ok&&e.showNotification("Notificaciones habilitadas!")}).catch(function(e){return console.log(e)})}()})}),c.a.render(r.a.createElement(h,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/CCK-demo",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("/CCK-demo","/service-worker.js");p?(function(e,n){fetch(e).then(function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):g(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):g(n,e)})}}()}],[[6,1,2]]]);
//# sourceMappingURL=main.9fc4c7d4.chunk.js.map